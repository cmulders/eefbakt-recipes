{% extends 'base.html' %}

{% load i18n %}

{% block breadcrumbs %}
{{ block.super }}
<li class="breadcrumb-item"><a href="{% url 'data:product-list' %}">{% trans 'Products' %}</a></li>
<li class="breadcrumb-item active">{{ object.name }}</li>
{% endblock %}

{% block content %}
<div class="d-flex align-items-center">
    <h1>{{ object.name }}</h1>
    <div class="btn-group ml-5 d-print-none">
        <a class="btn btn-outline-secondary btn-sm"
            href="{% url 'data:product-update' object.pk %}">{% trans "Edit" %}</a>
        <a class="btn btn-outline-danger btn-sm"
            href="{% url 'data:product-delete' object.pk %}">{% trans "Delete" %}</a>
    </div>
</div>
<div>
    <h3>Prices</h3>
    <ul>
        {% for price in object.prices.all %}
        <li>€ {{ price.normalized_price|floatformat:"2" }} per {{ price.unit }}
            ({{ price.store|default:'<i>Unkown</i>' }}:
            {{ price.amount }} {{ price.unit }} for
            €
            {{ price.price }})</li>
        {% empty %}
        <li><i>No prices known</i></li>
        {% endfor %}
    </ul>

    <h3>Conversions</h3>
    <table class="table table-sm d-inline text-right">
        {% for from_unit, to_units in conversions.items %}
        <tr>
            <th>1 {{ from_unit.short_name }} </th>
            {% for to_unit in to_units %}
            <td>{{ to_unit.0|floatformat:'-2' }} {{ to_unit.1.short_name }}</td>
            {% endfor %}
            </ul>
        </tr>
        {% empty %}
        <tr>
            <td>No prices known</td>
        </tr>
        {% endfor %}
    </table>
</div>
{% endblock %}